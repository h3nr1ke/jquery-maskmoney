/*
 *  jquery-maskmoney - v3.1.1
 *  jQuery plugin to mask data entry in the input text in the form of money (currency)
 *  https://github.com/plentz/jquery-maskmoney
 *
 *  Made by Diego Plentz
 *  Under MIT License
 */

!function($){"use strict";$.browser||($.browser={},$.browser.mozilla=/mozilla/.test(navigator.userAgent.toLowerCase())&&!/webkit/.test(navigator.userAgent.toLowerCase()),$.browser.webkit=/webkit/.test(navigator.userAgent.toLowerCase()),$.browser.opera=/opera/.test(navigator.userAgent.toLowerCase()),$.browser.msie=/msie/.test(navigator.userAgent.toLowerCase()),$.browser.device=/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(navigator.userAgent.toLowerCase()));var a={prefix:"",suffix:"",affixesStay:!0,thousands:",",decimal:".",precision:2,allowZero:!1,allowNegative:!1,doubleClickSelection:!0,allowEmpty:!1,bringCaretAtEndOnFocus:!0},t={destroy:function(){return $(this).unbind(".maskMoney"),$.browser.msie&&(this.onpaste=null),this},applyMask:function(e){return o(e,$(this).data("settings"))},mask:function(t){return this.each(function(){var e=$(this);return"number"==typeof t&&e.val(t),e.trigger("mask")})},unmasked:function(){return this.map(function(){var n,e=$(this).val()||"0",t=-1!==e.indexOf("-");return 0<($(this).data("settings")||a).precision?($(e.split(/\D/).reverse()).each(function(e,t){if(t)return n=t,!1}),e=(e=e.replace(/\D/g,"")).replace(new RegExp(n+"$"),"."+n),t&&(e="-"+e)):e=e.replace(/\D/g,""),parseFloat(e)})},unmaskedWithOptions:function(){return this.map(function(){var e=$(this).val()||"0",t=$(this).data("settings")||a,n=new RegExp(t.thousandsForUnmasked||t.thousands,"g");return e=e.replace(n,""),parseFloat(e)})},init:function(t){return t=$.extend($.extend({},a),t),this.each(function(){var f,n,v=$(this);function p(){var e,t,n,a,r,i=v.get(0),o=0,s=0;return"number"==typeof i.selectionStart&&"number"==typeof i.selectionEnd?(o=i.selectionStart,s=i.selectionEnd):(t=document.selection.createRange())&&t.parentElement()===i&&(a=i.value.length,e=i.value.replace(/\r\n/g,"\n"),(n=i.createTextRange()).moveToBookmark(t.getBookmark()),(r=i.createTextRange()).collapse(!1),-1<n.compareEndPoints("StartToEnd",r)?o=s=a:(o=-n.moveStart("character",-a),o+=e.slice(0,o).split("\n").length-1,-1<n.compareEndPoints("EndToEnd",r)?s=a:(s=-n.moveEnd("character",-a),s+=e.slice(0,s).split("\n").length-1))),{start:o,end:s}}function s(e){var t,a,n=v.val().length;v.val(o(v.val(),f)),t=v.val().length,f.reverse||(e-=n-t),a=e,f.formatOnBlur||v.each(function(e,t){if(t.setSelectionRange)t.focus(),t.setSelectionRange(a,a);else if(t.createTextRange){var n=t.createTextRange();n.collapse(!0),n.moveEnd("character",a),n.moveStart("character",a),n.select()}})}function a(){var e=v.val();if(!f.allowEmpty||""!==e){var t=!isNaN(e)?e.indexOf("."):e.indexOf(f.decimal);if(0<f.precision)if(t<0)e+=f.decimal+new Array(f.precision+1).join(0);else{var n=e.slice(0,t),a=e.slice(t+1);e=n+f.decimal+a+new Array(f.precision+1-a.length).join(0)}else 0<t&&(e=e.slice(0,t));v.val(o(e,f))}}function g(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function r(e){var t,n,a,r,i,o,s,l,c,u=(e=e||window.event).which||e.charCode||e.keyCode,d=f.decimal.charCodeAt(0);return void 0!==u&&(!(u<48||57<u)||u===d&&f.reverse?(t=!(v.val().length>=v.attr("maxlength")&&0<=v.attr("maxlength")),n=p(),a=n.start,r=n.end,i=!(n.start===n.end||!v.val().substring(a,r).match(/\d/)),o="0"===v.val().substring(0,1),!!(t||i||o)&&((u!==d||!function(){if(e=v.val().length,t=p(),0===t.start&&t.end===e)return!1;var e,t;return-1<v.val().indexOf(f.decimal)}())&&(!!f.formatOnBlur||(g(e),m(e),!1)))):(l=e,45===(s=u)?(v.val((c=v.val(),f.allowNegative?""!==c&&"-"===c.charAt(0)?c.replace("-",""):"-"+c:c)),!1):43===s?(v.val(v.val().replace("-","")),!1):(13===s||9===s||(!$.browser.mozilla||37!==s&&39!==s||0!==l.charCode)&&g(l),!0)))}function m(e){var t,n,a,r,i=(e=e||window.event).which||e.charCode||e.keyCode,o="";48<=i&&i<=57&&(o=String.fromCharCode(i)),n=(t=p()).start,a=t.end,r=v.val(),v.val(r.substring(0,n)+o+r.substring(a,r.length)),s(n+1)}function e(){setTimeout(function(){a()},0)}function i(){return(parseFloat("0")/Math.pow(10,f.precision)).toFixed(f.precision).replace(new RegExp("\\.","g"),f.decimal)}f=$.extend({},t),f=$.extend(f,v.data()),v.data("settings",f),$.browser.device&&v.attr("type","tel"),v.unbind(".maskMoney"),v.bind("keypress.maskMoney",r),v.bind("keydown.maskMoney",function(e){var t,n,a,r,i,o=(e=e||window.event).which||e.charCode||e.keyCode;return void 0!==o&&(n=(t=p()).start,a=t.end,8!==o&&46!==o&&63272!==o||(g(e),r=v.val(),n===a&&(8===o?""===f.suffix?n-=1:(i=r.split("").reverse().join("").search(/\d/),a=1+(n=r.length-i-1)):a+=1),v.val(r.substring(0,n)+r.substring(a,r.length)),s(n),!1))}),v.bind("blur.maskMoney",function(e){if($.browser.msie&&r(e),f.formatOnBlur&&v.val()!==n&&m(e),""===v.val()&&f.allowEmpty)v.val("");else if(""===v.val()||v.val()===u(i(),f))f.allowZero?f.affixesStay?v.val(u(i(),f)):v.val(i()):v.val("");else if(!f.affixesStay){var t=v.val().replace(f.prefix,"").replace(f.suffix,"");v.val(t)}v.val()!==n&&v.change()}),v.bind("focus.maskMoney",function(){n=v.val(),a();var e,t=v.get(0);f.selectAllOnFocus?t.select():t.createTextRange&&f.bringCaretAtEndOnFocus&&((e=t.createTextRange()).collapse(!1),e.select())}),v.bind("click.maskMoney",function(){var e,t=v.get(0);f.selectAllOnFocus||(t.setSelectionRange&&f.bringCaretAtEndOnFocus?(e=v.val().length,t.setSelectionRange(e,e)):v.val(v.val()))}),v.bind("dblclick.maskMoney",function(){var e,t,n=v.get(0);n.setSelectionRange&&f.bringCaretAtEndOnFocus?(t=v.val().length,e=f.doubleClickSelection?0:t,n.setSelectionRange(e,t)):v.val(v.val())}),v.bind("cut.maskMoney",e),v.bind("paste.maskMoney",e),v.bind("mask.maskMoney",a)})}};function u(e,t){var n="";return-1<e.indexOf("-")&&(e=e.replace("-",""),n="-"),-1<e.indexOf(t.prefix)&&(e=e.replace(t.prefix,"")),-1<e.indexOf(t.suffix)&&(e=e.replace(t.suffix,"")),n+t.prefix+e+t.suffix}function o(e,t){return t.allowEmpty&&""===e?"":t.reverse?function(e,t){var n,a=-1<e.indexOf("-")&&t.allowNegative?"-":"",r=e.replace(t.prefix,"").replace(t.suffix,""),i=r.split(t.decimal)[0],o="";""===i&&(i="0");if(n=d(i,a,t),0<t.precision){var s=r.split(t.decimal);1<s.length&&(o=s[1]),n+=t.decimal+o;var l=Number.parseFloat(i+"."+o).toFixed(t.precision),c=l.toString().split(t.decimal)[1];n=n.split(t.decimal)[0]+"."+c}return u(n,t)}(e,t):function(e,t){var n,a,r,i=-1<e.indexOf("-")&&t.allowNegative?"-":"",o=e.replace(/[^0-9]/g,""),s=o.slice(0,o.length-t.precision);if(n=d(s,i,t),0<t.precision){if(!isNaN(e)&&e.indexOf(".")){var l=e.substr(e.indexOf(".")+1);o+=new Array(t.precision+1-l.length).join(0),s=o.slice(0,o.length-t.precision),n=d(s,i,t)}a=o.slice(o.length-t.precision),r=new Array(t.precision+1-a.length).join(0),n+=t.decimal+r+a}return u(n,t)}(e,t)}function d(e,t,n){return""===(e=(e=e.replace(/^0*/g,"")).replace(/\B(?=(\d{3})+(?!\d))/g,n.thousands))&&(e="0"),t+e}$.fn.maskMoney=function(e){return t[e]?t[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void $.error("Method "+e+" does not exist on jQuery.maskMoney"):t.init.apply(this,arguments)}}(window.jQuery||window.Zepto);